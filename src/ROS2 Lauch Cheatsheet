# Start Gazebo and Spawn Car
cd ~/Senior_Design/Vehicle/ros2_ws
rm -rf build install log
colcon build
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 launch car_description spawn_car.launch.py

# teleop (Different Terminal)
cd ~/Senior_Design/Vehicle/ros2_ws
ros2 run teleop_twist_keyboard teleop_twist_keyboard --ros-args -r cmd_vel:=/car_chassis/cmd_vel

# ML Inference Node (Different Terminal again)
cd ~/Senior_Design/Vehicle/ros2_ws
rm -rf build install log
colcon build --packages-select perception_inference
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 launch perception_inference ml_infer.launch.py \
  model_path:=/home/kylewong/Senior_Design/Vehicle/ros2_ws/src/perception_inference/models/yolo12n.pt \
  image_topic:=/oak/color/oak_color/image_raw

# View Inference Results (Different Terminal again)
rqt
# In rqt: Plugins → Visualization → Image View → select /inference/image_marked

# OAK-D Detection Distance Node (Different Terminal again)
cd ~/Senior_Design/Vehicle/ros2_ws
rm -rf build install log
colcon build --packages-select perception_inference
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 run perception_inference oak_detection_distance

# Ultrasonic Sensors (Different Terminal again)
cd ~/Senior_Design/Vehicle/ros2_ws
colcon build
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 run perception_inference ultrasonic_monitor --ros-args -p print_period_s:=1.0

# Fusion Decision Node (Different Terminal again)
cd ~/Senior_Design/Vehicle/ros2_ws
source /opt/ros/humble/setup.bash
source install/setup.bash
ros2 run perception_inference fusion_decision

